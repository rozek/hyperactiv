const e=["String","Number","Object","Array","Boolean","Date"];function t(e){return e&&"object"==typeof e}function r(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!1,configurable:!0})}function n(e,t,n){r(e,"__key",t),r(e,"__parent",n)}const o={computedStack:[],trackerSymbol:Symbol("tracker")};let c=null;const i=Symbol();function u(){if(c){for(const e of c)e(),e[i]=!1;c=null}}function f(e,t){e[i]||(null===c&&(c=[],!0===t?queueMicrotask(u):setTimeout(u,t)),c.push(e))}const{computedStack:a,trackerSymbol:l}=o,s=Symbol("__observed"),d=Symbol("modifiedProperty");function y(e,t,r){if(e===t)return!1;let n=typeof e;if(n!==typeof t)return!0;switch(n){case"undefined":case"boolean":case"string":case"function":default:return!0;case"number":return isNaN(e)!==isNaN(t)||Math.abs(e-t)>Number.EPSILON;case"object":return null==e||(null==t||("by-value"===r&&(e instanceof Boolean||e instanceof Number||e instanceof String)?e.valueOf()!==t.valueOf():Array.isArray(e)?function(e,t,r){if(!Array.isArray(t))return!0;if(e.length!==t.length)return!0;for(let n=0,o=e.length;n<o;n++)if(y(e[n],t[n],r))return!0;return!1}(e,t,r):"by-reference"===r||function(e,t,r){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!0;for(let r in e)if(!(r in t))return!0;for(let n in t){if(!(n in e))return!0;if(y(e[n],t[n],r))return!0}return!1}(e,t,r)))}return!0}const{computedStack:b,trackerSymbol:p}=o;var _={observe:function o(c,u={}){const{props:b,ignore:p,batch:_,deep:g=!0,bubble:h,bind:m}=u;if(c[s])return c;const O=e=>e!==s&&(null==b||b instanceof Array&&b.includes(e))&&(null==p||p instanceof Array&&!p.includes(e));function P(e,c,s){if("__handler"===c)r(e,"__handler",s);else if(O(c)){if(Array.isArray(e)&&"length"===c||y(e[c],s)){const r=c!==d&&g&&t(s),y=e[c];e[c]=r?o(s,u):s,r&&h&&n(e[c],c,e);const b=[c];let p=e;for(;p&&(!p.__handler||!1!==p.__handler(b,s,y,k));)p.__key&&p.__parent?(b.unshift(p.__key),p=p.__parent):p=null;const m=S.get(c);if(m)for(const t of m){const r=t[l],n=r&&r.get(e),o=n&&n.has(c);t.__disposed||r&&!o?m.delete(t):t!==a[0]&&(void 0!==_&&!1!==_?(f(t,_),t[i]=!0):t())}if(c!==d){e[d]=c;const t=S.get(d);if(t)for(const r of t){const n=r[l],o=n&&n.get(e),c=o&&o.has(d);r.__disposed||n&&!c?t.delete(r):r!==a[0]&&(void 0!==_&&!1!==_?(f(r,_),r[i]=!0):r())}}}}else e[c]=s}g&&Object.entries(c).forEach((function([e,r]){t(r)&&O(e)&&(c[e]=o(r,u),h&&n(c[e],e,c))}));const S=new Map,k=new Proxy(c,{get(e,t){if(t===s)return!0;if(O(t)&&a.length){const e=a[0],r=e[l];if(r){let e=r.get(c);e||(e=new Set,r.set(c,e)),e.add(t)}let n=S.get(t);n||(n=new Set,S.set(t,n)),n.add(e)}return c[t]},set:(e,t,r)=>(P(c,t,r),!0),defineProperty(e,r,n){if("__handler"===r)throw new Error("Don't track bubble handlers");if(!O(r))return Reflect.defineProperty(c,r,n);if(!Array.isArray(c)||"length"===r){"value"in n&&g&&t(n.value)&&((n={...n}).value=o(n.value,u));const e=Reflect.defineProperty(c,r,n);return r!==d&&(c[d]=r),e}return!1},deleteProperty(e,t){if(t===d)throw new Error('internal property Symbol("modifiedProperty") must not be deleted');return t in c&&P(c,t,void 0),Reflect.deleteProperty(e,t)}});var v;return m&&(v=c,Object.getOwnPropertyNames(v).concat(Object.getPrototypeOf(v)&&e.indexOf(Object.getPrototypeOf(v).constructor.name)<0?Object.getOwnPropertyNames(Object.getPrototypeOf(v)):[]).filter((e=>"constructor"!==e&&"function"==typeof v[e]))).forEach((e=>c[e]=c[e].bind(k))),k},modifiedProperty:d,computed:function(e,{autoRun:t=!0,callback:r,bind:n,disableTracking:o=!1}={}){function c(t,c=[]){const f=r||u;o||(f[p]=new WeakMap),b.unshift(f),c=c.length>0?[...c,i]:[i];const a=t?t():n?e.apply(n,c):e(...c);return b.shift(),a}const i={computeAsync:c},u=(...e)=>c(null,e);return t&&u(),u},dispose:function(e){return e[o.trackerSymbol]=null,e.__disposed=!0},batch:u};export{_ as default};
//# sourceMappingURL=index.mjs.map
