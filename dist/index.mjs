const e=["String","Number","Object","Array","Boolean","Date"];function t(e){return e&&"object"==typeof e}function n(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,configurable:!0})}function o(e,t,o){n(e,"__key",t),n(e,"__parent",o)}const r={computedStack:[],trackerSymbol:Symbol("tracker")};let c=null;const a=Symbol();function s(){if(c){for(const e of c)e(),e[a]=!1;c=null}}function u(e,t){e[a]||(null===c&&(c=[],!0===t?queueMicrotask(s):setTimeout(s,t)),c.push(e))}const{computedStack:i,trackerSymbol:l}=r,f=Symbol("__observed");const{computedStack:b,trackerSymbol:d}=r;var p={observe:function r(c,s={}){const{props:b,ignore:d,batch:p,deep:y=!0,bubble:_,bind:m}=s;if(c[f])return c;const g=(e,t)=>e!==f&&(!b||b instanceof Array&&b.includes(e)||"function"==typeof b&&b(e,t))&&(!d||!(d instanceof Array&&d.includes(e))&&!("function"==typeof d&&d(e,t)));y&&Object.entries(c).forEach((function([e,n]){t(n)&&g(e,n)&&(c[e]=r(n,s),_&&o(c[e],e,c))}));const h=new Map,k=new Proxy(c,{get(e,t){if(t===f)return!0;if(g(t,c[t])&&i.length){const e=i[0],n=e[l];if(n){let e=n.get(c);e||(e=new Set,n.set(c,e)),e.add(t)}let o=h.get(t);o||(o=new Set,h.set(t,o)),o.add(e)}return c[t]},set(e,f,b){if("__handler"===f)n(c,"__handler",b);else if(g(f,b)){if(Array.isArray(c)&&"length"===f||c[f]!==b){const e=y&&t(b),n=c[f];t(n)&&delete c[f],c[f]=e?r(b,s):b,e&&_&&o(c[f],f,c);const d=[f];let m=c;for(;m&&(!m.__handler||!1!==m.__handler(d,b,n,k));)m.__key&&m.__parent?(d.unshift(m.__key),m=m.__parent):m=null;const g=h.get(f);if(g)for(const e of g){const t=e[l],n=t&&t.get(c),o=n&&n.has(f);e.__disposed||t&&!o?g.delete(e):e!==i[0]&&(void 0!==p&&!1!==p?(u(e,p),e[a]=!0):e())}}}else c[f]=b;return!0}});var O;return m&&(O=c,Object.getOwnPropertyNames(O).concat(Object.getPrototypeOf(O)&&e.indexOf(Object.getPrototypeOf(O).constructor.name)<0?Object.getOwnPropertyNames(Object.getPrototypeOf(O)):[]).filter((e=>"constructor"!==e&&"function"==typeof O[e]))).forEach((e=>c[e]=c[e].bind(k))),k},computed:function(e,{autoRun:t=!0,callback:n,bind:o,disableTracking:r=!1}={}){function c(t,c=[]){const u=n||s;r||(u[d]=new WeakMap),b.unshift(u),c=c.length>0?[...c,a]:[a];const i=t?t():o?e.apply(o,c):e(...c);return b.shift(),i}const a={computeAsync:c},s=(...e)=>c(null,e);return t&&s(),s},dispose:function(e){return e[r.trackerSymbol]=null,e.__disposed=!0},batch:s};export{p as default};
//# sourceMappingURL=index.mjs.map
